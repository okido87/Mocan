const _0x53b8c5=_0x2b76;(function(_0xb83c82,_0x152eda){const _0x53ec28=_0x2b76,_0x5249b1=_0xb83c82();while(!![]){try{const _0x555780=-parseInt(_0x53ec28(0x219))/0x1*(-parseInt(_0x53ec28(0x1f8))/0x2)+parseInt(_0x53ec28(0x21c))/0x3*(parseInt(_0x53ec28(0x1d7))/0x4)+-parseInt(_0x53ec28(0x215))/0x5*(parseInt(_0x53ec28(0x213))/0x6)+-parseInt(_0x53ec28(0x1dd))/0x7+parseInt(_0x53ec28(0x1f2))/0x8*(-parseInt(_0x53ec28(0x20b))/0x9)+-parseInt(_0x53ec28(0x1eb))/0xa+parseInt(_0x53ec28(0x244))/0xb;if(_0x555780===_0x152eda)break;else _0x5249b1['push'](_0x5249b1['shift']());}catch(_0x209be3){_0x5249b1['push'](_0x5249b1['shift']());}}}(_0x4265,0x9de1e));const API_CONFIG={'APP_ID':'323b6578-b51a-425a-9775-c84d2d8d0904','ACCESS_KEY':_0x53b8c5(0x220),'REGION':_0x53b8c5(0x1d6),'BASE_URL':_0x53b8c5(0x229),'APP_NAME':_0x53b8c5(0x212)};function setDocumentTitle(_0x671957){const _0x4cb885=_0x53b8c5;_0x671957&&_0x671957!=='Đang\x20tải...'&&(document[_0x4cb885(0x1e6)]=_0x671957);}let state={'deliveryData':null,'loading':![]};const PrintManager={'print':async()=>{const _0x53c48c=_0x53b8c5;try{if(!state['deliveryData']){alert(_0x53c48c(0x204));return;}const _0x2e97b3=document[_0x53c48c(0x1d4)](_0x53c48c(0x246)),_0x2a9122=_0x2e97b3[_0x53c48c(0x22a)];_0x2e97b3[_0x53c48c(0x1ee)]=!![],_0x2e97b3[_0x53c48c(0x22a)]=_0x53c48c(0x226),PrintManager[_0x53c48c(0x1fc)](_0x53c48c(0x1ff));const _0x4cc0b6=document[_0x53c48c(0x1d4)]('soPhieuGH')['textContent'];_0x4cc0b6&&_0x4cc0b6!=='Đang\x20tải...'&&(document[_0x53c48c(0x1e6)]='PhieuGiaoHang_'+_0x4cc0b6),PrintManager[_0x53c48c(0x23b)](),window[_0x53c48c(0x20a)](),setTimeout(()=>{const _0x42ed1b=_0x53c48c;_0x2e97b3[_0x42ed1b(0x1ee)]=![],_0x2e97b3[_0x42ed1b(0x22a)]=_0x2a9122;},0x3e8);}catch(_0x3b7dbf){console[_0x53c48c(0x20d)](_0x53c48c(0x1d9),_0x3b7dbf),alert(_0x53c48c(0x23d));const _0x3f6bbf=document[_0x53c48c(0x1d4)](_0x53c48c(0x246));_0x3f6bbf[_0x53c48c(0x1ee)]=![],_0x3f6bbf[_0x53c48c(0x22a)]=_0x53c48c(0x217),PrintManager['hidePrintStatus']();}},'showPrintStatus':_0x570a04=>{const _0x23e3d3=_0x53b8c5,_0x1ba102=document['getElementById'](_0x23e3d3(0x1e9));_0x1ba102[_0x23e3d3(0x237)]=_0x570a04,_0x1ba102[_0x23e3d3(0x1fd)]['display']=_0x23e3d3(0x233);},'hidePrintStatus':()=>{const _0x56508b=_0x53b8c5,_0x2d729e=document[_0x56508b(0x1d4)](_0x56508b(0x1e9));_0x2d729e[_0x56508b(0x1fd)][_0x56508b(0x205)]=_0x56508b(0x1e0);}};function printDocument(){const _0x4698d5=_0x53b8c5;PrintManager[_0x4698d5(0x20a)]();}const apiService={'createAxiosInstance'(){const _0x5bbc56=_0x53b8c5;return axios['create']({'baseURL':API_CONFIG[_0x5bbc56(0x22c)]+'/'+API_CONFIG[_0x5bbc56(0x200)]+'/tables','headers':{'ApplicationAccessKey':API_CONFIG[_0x5bbc56(0x1d8)],'Content-Type':_0x5bbc56(0x23e)}});},async 'request'(_0x31d76c,_0x24a948,_0x863fdb={},_0x9e7d1f={}){const _0x6278f5=_0x53b8c5;try{const _0x52acee=this['createAxiosInstance'](),_0x461d32={'Action':_0x24a948,'Properties':{'UserSettings':{'User\x20name':_0x6278f5(0x23a),'Password':_0x6278f5(0x1f0)},..._0x9e7d1f},..._0x863fdb},_0x3a3e09=await _0x52acee[_0x6278f5(0x1de)]('/'+_0x31d76c+_0x6278f5(0x243),_0x461d32);return _0x3a3e09[_0x6278f5(0x1f1)];}catch(_0x25993c){console[_0x6278f5(0x20d)](_0x6278f5(0x1e3),_0x25993c);throw _0x25993c;}}},showLoading=()=>{const _0x5842c2=_0x53b8c5;document[_0x5842c2(0x1d4)]('loadingOverlay')[_0x5842c2(0x1fd)][_0x5842c2(0x205)]=_0x5842c2(0x21e),state[_0x5842c2(0x238)]=!![];},hideLoading=()=>{const _0x3eea81=_0x53b8c5;document['getElementById']('loadingOverlay')[_0x3eea81(0x1fd)][_0x3eea81(0x205)]=_0x3eea81(0x1e0),state[_0x3eea81(0x238)]=![];};function formatNumber(_0x4abb4e){const _0x3d5309=_0x53b8c5;if(_0x4abb4e===null||_0x4abb4e===undefined||isNaN(_0x4abb4e))return'0';return new Intl[(_0x3d5309(0x1ed))](_0x3d5309(0x1ef))['format'](_0x4abb4e);}function formatDate(_0x1ebf72){const _0x60faa8=_0x53b8c5;if(!_0x1ebf72)return'';try{const _0x46d44f=new Date(_0x1ebf72);if(isNaN(_0x46d44f[_0x60faa8(0x21d)]()))return _0x1ebf72;const _0x23d1e5=_0x46d44f[_0x60faa8(0x1f6)](),_0x3b8cbd=_0x46d44f[_0x60faa8(0x228)]()+0x1,_0x4562a8=_0x46d44f['getFullYear']();return _0x23d1e5+_0x60faa8(0x223)+_0x3b8cbd+_0x60faa8(0x236)+_0x4562a8;}catch(_0x4bbe8c){return _0x1ebf72;}}async function fetchDeliveryData(_0xe7c343){const _0x218c25=_0x53b8c5;try{showLoading();const [_0x29fac4,_0x56c67b,_0x29911b]=await Promise[_0x218c25(0x20c)]([apiService[_0x218c25(0x231)](_0x218c25(0x224),'Find',{},{'Selector':'Filter(GiaoHang,\x20[Số\x20phiếu\x20GH]\x20=\x20\x27'+_0xe7c343+'\x27)'}),apiService[_0x218c25(0x231)](_0x218c25(0x20f),_0x218c25(0x214),{},{'Selector':'Filter(CTGiaoHang,\x20[Số\x20phiếu\x20GH]\x20=\x20\x27'+_0xe7c343+'\x27)'}),apiService[_0x218c25(0x231)](_0x218c25(0x242),'Find',{},{})]);if(!_0x29fac4||_0x29fac4[_0x218c25(0x1e5)]===0x0)throw new Error(_0x218c25(0x1f9)+_0xe7c343);return state[_0x218c25(0x22d)]={'header':_0x29fac4[0x0],'details':_0x56c67b||[],'nhanVien':_0x29911b||[]},state['deliveryData'];}catch(_0x42e909){console['error'](_0x218c25(0x21a),_0x42e909);throw _0x42e909;}finally{hideLoading();}}function getTenNhanVien(_0x3d175f,_0x45dfa7){const _0x519339=_0x53b8c5;if(!_0x3d175f||!_0x45dfa7)return _0x3d175f||'';const _0x277783=_0x45dfa7['find'](_0x544ab1=>_0x544ab1[_0x519339(0x20e)]===_0x3d175f);return _0x277783?_0x277783[_0x519339(0x1fb)]:_0x3d175f;}function populateDeliveryHeader(_0x585476,_0x212f3b=[]){const _0x432ddf=_0x53b8c5;try{const _0xc9aa27=_0x585476['Số\x20phiếu\x20GH']||'\x20';document[_0x432ddf(0x1d4)]('soPhieuGH')[_0x432ddf(0x237)]=_0xc9aa27,document[_0x432ddf(0x1d4)](_0x432ddf(0x21f))['textContent']=formatDate(_0x585476['Ngày\x20giao']),setDocumentTitle(_0xc9aa27),document[_0x432ddf(0x1d4)](_0x432ddf(0x210))[_0x432ddf(0x237)]=_0x585476[_0x432ddf(0x203)]||'\x20',document['getElementById'](_0x432ddf(0x1d5))[_0x432ddf(0x237)]=_0x585476[_0x432ddf(0x1f7)]||'\x20',document[_0x432ddf(0x1d4)]('diaChiGiaoHang')[_0x432ddf(0x237)]=_0x585476['Địa\x20chỉ\x20giao\x20hàng']||'\x20',document['getElementById'](_0x432ddf(0x239))['textContent']=_0x585476[_0x432ddf(0x230)]||'\x20',document[_0x432ddf(0x1d4)](_0x432ddf(0x207))['textContent']=_0x585476[_0x432ddf(0x1e8)]||'\x20';const _0x4f2bb0=_0x585476[_0x432ddf(0x1e1)]||'';document[_0x432ddf(0x1d4)](_0x432ddf(0x221))[_0x432ddf(0x237)]=_0x4f2bb0,document['getElementById'](_0x432ddf(0x1f3))[_0x432ddf(0x237)]=_0x585476[_0x432ddf(0x230)]||'',document[_0x432ddf(0x1d4)](_0x432ddf(0x202))[_0x432ddf(0x237)]=getTenNhanVien(_0x585476[_0x432ddf(0x22e)],_0x212f3b),document[_0x432ddf(0x1d4)](_0x432ddf(0x1e4))[_0x432ddf(0x237)]=getTenNhanVien(_0x585476[_0x432ddf(0x1ea)],_0x212f3b);}catch(_0x3a0da8){console[_0x432ddf(0x20d)](_0x432ddf(0x206),_0x3a0da8);throw _0x3a0da8;}}async function populateProductTable(_0x15b687){const _0x14b592=_0x53b8c5,_0x3fe5cb=document[_0x14b592(0x1d4)](_0x14b592(0x22f));_0x3fe5cb[_0x14b592(0x22a)]='';try{if(_0x15b687[_0x14b592(0x1e5)]===0x0){_0x3fe5cb['innerHTML']=_0x14b592(0x209);return;}for(let _0x26ca2e=0x0;_0x26ca2e<_0x15b687[_0x14b592(0x1e5)];_0x26ca2e++){const _0x128918=_0x15b687[_0x26ca2e],_0x4c5064=_0x128918[_0x14b592(0x1da)]||'',_0x511a4d=parseFloat(_0x128918['SL\x20thực\x20giao'])||0x0,_0x307275=parseFloat(_0x128918[_0x14b592(0x225)])||0x0,_0xff88df=parseFloat(_0x128918[_0x14b592(0x211)])||0x0,_0x394f99=document[_0x14b592(0x1e2)]('tr'),_0x315047=_0x128918[_0x14b592(0x23c)]||'',_0x21ec0b=_0x128918['Số\x20ĐH']||'',_0x169a95=_0x315047+(_0x21ec0b?'<br>SỐ\x20ĐH:\x20<span\x20style=\x22font-weight:\x20normal;\x22>'+_0x21ec0b+_0x14b592(0x216):'');_0x394f99[_0x14b592(0x22a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x26ca2e+0x1)+_0x14b592(0x1df)+_0x169a95+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4c5064+_0x14b592(0x241)+formatNumber(_0x511a4d)+_0x14b592(0x241)+formatNumber(_0x307275)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22number\x22>'+formatNumber(_0xff88df)+_0x14b592(0x1f4)+(_0x128918[_0x14b592(0x1e1)]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3fe5cb['appendChild'](_0x394f99);}}catch(_0x478760){console[_0x14b592(0x20d)](_0x14b592(0x22b),_0x478760);throw _0x478760;}}function _0x4265(){const _0x2347c6=['\x20tháng\x20','GiaoHang','SL\x20bù\x20hao','⏳\x20Đang\x20in...','addEventListener','getMonth','https://www.appsheet.com/api/v2/apps','innerHTML','Error\x20in\x20populateProductTable:','BASE_URL','deliveryData','Tài\x20xế','productTableBody','Người\x20nhận\x20hàng','request','keydown','block','Error\x20initializing\x20delivery\x20data:','DOMContentLoaded','\x20năm\x20','textContent','loading','nguoiLienHe','Admin','hidePrintStatus','Tên\x20Sản\x20phẩm','Có\x20lỗi\x20xảy\x20ra\x20khi\x20in.\x20Vui\x20lòng\x20thử\x20lại!','application/json','nhanVien','soPhieuGH','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22number\x22>','NhanVien','/Action','13522432nClcME','</td></tr>','printBtn','getElementById','soDienThoai','www','12bJfuyC','ACCESS_KEY','Print\x20error:','Đvt','message','location','2549351PPEeyG','post','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22product-name\x22>','none','Ghi\x20chú','createElement','API\x20request\x20failed:','nguoiTao','length','title','header','Hình\x20thức\x20giao','printStatus','Người\x20tạo','2174520gnKCUy','PrintManager','NumberFormat','disabled','vi-VN','123456','data','2493832arlHXP','nguoiNhanHangKy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','details','getDate','Số\x20điện\x20thoại','58IQFhNM','Không\x20tìm\x20thấy\x20phiếu\x20giao\x20hàng\x20với\x20số:\x20','diaChiGiaoHang','Họ\x20và\x20tên','showPrintStatus','style','forEach','Đang\x20chuẩn\x20bị\x20in...','APP_ID','<tr><td\x20colspan=\x2210\x22\x20class=\x22error\x22>❌\x20Lỗi:\x20','taiXe','Tên\x20khách\x20hàng','Vui\x20lòng\x20đợi\x20dữ\x20liệu\x20tải\x20xong\x20trước\x20khi\x20in!','display','Error\x20populating\x20header:','hinhThucVanChuyen','preventDefault','<tr><td\x20colspan=\x229\x22\x20class=\x22warning\x22>⚠️\x20Không\x20có\x20chi\x20tiết\x20sản\x20phẩm\x20cho\x20phiếu\x20giao\x20hàng\x20này</td></tr>','print','9OLwOtm','all','error','Mã\x20NV','CTGiaoHang','tenKhachHang','SL\x20thực\x20tính','MocAnSystem-777046908','42KdroSV','Find','747525yYLvyX','</span>','🖨️\x20In\x20phiếu\x20giao\x20hàng','get','29521eJnCFW','Error\x20fetching\x20delivery:','search','501174VzalfW','getTime','flex','ngayGiao','V2-MipF3-d6wQk-t6AIN-zzz0j-HglL4-Uq2Yp-EckHF-m3lOV','ghiChuGiaoHang','printDocument'];_0x4265=function(){return _0x2347c6;};return _0x4265();}function _0x2b76(_0x1ea7b8,_0x54759a){const _0x42657f=_0x4265();return _0x2b76=function(_0x2b760b,_0x47326a){_0x2b760b=_0x2b760b-0x1d4;let _0x2b18e0=_0x42657f[_0x2b760b];return _0x2b18e0;},_0x2b76(_0x1ea7b8,_0x54759a);}function showError(_0x2f9573){const _0x41000c=_0x53b8c5,_0xf3099c=document[_0x41000c(0x1d4)](_0x41000c(0x22f));_0xf3099c[_0x41000c(0x22a)]=_0x41000c(0x201)+_0x2f9573+_0x41000c(0x245);const _0x124ae6=[_0x41000c(0x240),_0x41000c(0x21f),_0x41000c(0x210),_0x41000c(0x1d5),_0x41000c(0x1fa),'nguoiLienHe',_0x41000c(0x207)];_0x124ae6[_0x41000c(0x1fe)](_0x39865e=>{const _0x57f859=_0x41000c,_0x38be52=document[_0x57f859(0x1d4)](_0x39865e);if(_0x38be52)_0x38be52['textContent']='Lỗi\x20tải\x20dữ\x20liệu';});}function getUrlParameter(_0x28b143){const _0x2a9f77=_0x53b8c5,_0x2dd5f2=new URLSearchParams(window[_0x2a9f77(0x1dc)][_0x2a9f77(0x21b)]);return _0x2dd5f2[_0x2a9f77(0x218)](_0x28b143);}document[_0x53b8c5(0x227)](_0x53b8c5(0x232),function(_0x48b48e){const _0x4a0658=_0x53b8c5;_0x48b48e['ctrlKey']&&_0x48b48e['key']==='p'&&(_0x48b48e[_0x4a0658(0x208)](),printDocument());}),document['addEventListener'](_0x53b8c5(0x235),function(){initializeDeliveryData();});async function initializeDeliveryData(){const _0x58f658=_0x53b8c5;try{const _0x38c036=getUrlParameter('deliveryId');if(!_0x38c036)throw new Error('Vui\x20lòng\x20cung\x20cấp\x20deliveryId\x20trong\x20URL\x20(ví\x20dụ:\x20?deliveryId=GH001)');const _0x1402b6=await fetchDeliveryData(_0x38c036);populateDeliveryHeader(_0x1402b6[_0x58f658(0x1e7)],_0x1402b6[_0x58f658(0x23f)]),await populateProductTable(_0x1402b6[_0x58f658(0x1f5)]),document['getElementById'](_0x58f658(0x246))[_0x58f658(0x1ee)]=![];}catch(_0x3162ff){console[_0x58f658(0x20d)](_0x58f658(0x234),_0x3162ff),showError(_0x3162ff[_0x58f658(0x1db)]),document[_0x58f658(0x1d4)](_0x58f658(0x246))[_0x58f658(0x1ee)]=!![];}}window[_0x53b8c5(0x1ec)]=PrintManager,window[_0x53b8c5(0x222)]=printDocument;